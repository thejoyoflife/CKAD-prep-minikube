- `k create deploy nginx-blue --image nginx:1.23.0 --replicas 3 --port 80 $do > deploy-blue.yaml`
- Change the file to include `version=blue` labels in the pod template and the deployment selector.
- `k apply -f deploy-blue.yaml`
- `k expose deploy nginx-blue --name nginx`
- `k run tmp --image alpine/curl --rm --restart Never -it --image-pull-policy IfNotPresent -- curl -sI nginx | grep -i server` => this shows the server version as `1.23.0`.
- `k create deploy nginx-greeen --image nginx:1.23.4 --replicas 3 --port 80 $do > deploy-green.yaml`
- Change the file to include `version=green` labels in the pod template and the deployment selector.
- `k apply -f deploy-green.yaml`
- `k edit svc nginx` => change the selector label from `version=blue` to `version=green`.
- `k delete deploy nginx-blue`
- `k run tmp --image alpine/curl --rm --restart Never -it --image-pull-policy IfNotPresent -- curl -sI nginx | grep -i server` => this shows the server version as `1.23.4`.